{% extends "layout.html" %}
{% block title %} Kokeet {% endblock %}
{% block content %}
<h2>Kokeet</h2>
<b>Aihealue:</b> {{ subject.name }}
<hr>

<h3>Luo uusi koe:</h3>
<form action="/exams/add" method="POST">
    <input type="hidden" value="/subjects/{{subject.id}}/exams" name="path" />
    <input type="hidden" value="{{subject.id}}" name="subject_id"/>
    <b> Kokeen nimi: </b> <br>
    <input type="text" name="name" placeholder="Pituus 4-30 merkkiä" required> <br> <br>
    <b> Aikaraja (minuuttia): </b> <br>
    <input type="number" name="timelimit" placeholder="1-460" required> <br> <br>
    <input type="submit" class="btn btn-primary" value="Lisää">
    <input type="hidden" name="csrf_token" value="{{session.csrf_token}}">
</form>
<hr>

{% for exam in exams %}
<h3>{{ exam.exam_name }}</h3>
<p> <b>Aikaraja: </b> {{ exam.time_limit_minutes }} minuuttia
<p> <b>Kysymyksiä: </b> {{ exam.total_questions}}
<p> <b>Maksimipisteet: </b> {% if exam.max_points == None %} - {% else %} {{exam.max_points}} {% endif %}

<p> <a href="/exams/{{exam.exam_id}}">Lisää tai poista kysymyksiä</a>
<p>
    <form action="/exams/delete" method="POST">
        <input type="hidden" value="/subjects/{{exams[0].subject_id}}/exams" name="path">
        <input type="hidden" value="{{exam.exam_id}}" name="exam_id">
        <input type="submit" class="btn btn-danger" value="Poista" 
            onclick="return confirm('Kokeen poistaminen poistaa sen myös kaikista tilastoista. Haluatko varmasti poistaa kokeen?');">
        <input type="hidden" name="csrf_token" value="{{session.csrf_token}}">
    </form>
</p>
<hr>
{% endfor %}
{% endblock %}